@page "/rules/equipment"
@using PathfinderCampaignManager.Domain.Entities.Auth
@using PathfinderCampaignManager.Presentation.Client.Attributes
@using PathfinderCampaignManager.Presentation.Client.Components.Auth

[DMOnly]
<PageTitle>Equipment & Armor - DM Reference</PageTitle>

<div class="equipment-reference">
    <div class="page-header">
        <h1><i class="fas fa-shield-alt"></i> Equipment & Armor Reference</h1>
        <p class="lead">Quick reference for armor, shields, and equipment with proficiency levels</p>
    </div>

    <div class="content-tabs">
        <ul class="nav nav-tabs" id="equipmentTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <a class="nav-link active" id="armor-tab" data-bs-toggle="tab" href="#armor" role="tab">
                    <i class="fas fa-shield-alt"></i> Armor
                </a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="shields-tab" data-bs-toggle="tab" href="#shields" role="tab">
                    <i class="fas fa-shield"></i> Shields
                </a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="equipment-tab" data-bs-toggle="tab" href="#equipment" role="tab">
                    <i class="fas fa-backpack"></i> Equipment
                </a>
            </li>
            <li class="nav-item" role="presentation">
                <a class="nav-link" id="proficiency-tab" data-bs-toggle="tab" href="#proficiency" role="tab">
                    <i class="fas fa-chart-line"></i> Proficiency
                </a>
            </li>
        </ul>

        <div class="tab-content" id="equipmentTabsContent">
            <!-- Armor Tab -->
            <div class="tab-pane fade show active" id="armor" role="tabpanel">
                <div class="armor-section">
                    <div class="armor-categories">
                        <!-- Light Armor -->
                        <div class="armor-category card mb-4">
                            <div class="card-header bg-success text-white">
                                <h4><i class="fas fa-tshirt"></i> Light Armor</h4>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Level</th>
                                                <th>Price</th>
                                                <th>AC</th>
                                                <th>Dex Cap</th>
                                                <th>Check Penalty</th>
                                                <th>Speed Penalty</th>
                                                <th>Strength</th>
                                                <th>Bulk</th>
                                                <th>Traits</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><strong>Padded Armor</strong></td>
                                                <td>0</td>
                                                <td>2 sp</td>
                                                <td>+1</td>
                                                <td>+3</td>
                                                <td>—</td>
                                                <td>—</td>
                                                <td>10</td>
                                                <td>L</td>
                                                <td>Comfort</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Leather Armor</strong></td>
                                                <td>0</td>
                                                <td>2 gp</td>
                                                <td>+1</td>
                                                <td>+4</td>
                                                <td>-1</td>
                                                <td>—</td>
                                                <td>10</td>
                                                <td>1</td>
                                                <td>—</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Studded Leather</strong></td>
                                                <td>0</td>
                                                <td>3 gp</td>
                                                <td>+2</td>
                                                <td>+3</td>
                                                <td>-1</td>
                                                <td>—</td>
                                                <td>12</td>
                                                <td>1</td>
                                                <td>—</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Chain Shirt</strong></td>
                                                <td>0</td>
                                                <td>5 gp</td>
                                                <td>+2</td>
                                                <td>+3</td>
                                                <td>-1</td>
                                                <td>—</td>
                                                <td>12</td>
                                                <td>1</td>
                                                <td>Flexible, Noisy</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- Medium Armor -->
                        <div class="armor-category card mb-4">
                            <div class="card-header bg-warning text-dark">
                                <h4><i class="fas fa-vest"></i> Medium Armor</h4>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Level</th>
                                                <th>Price</th>
                                                <th>AC</th>
                                                <th>Dex Cap</th>
                                                <th>Check Penalty</th>
                                                <th>Speed Penalty</th>
                                                <th>Strength</th>
                                                <th>Bulk</th>
                                                <th>Traits</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><strong>Hide Armor</strong></td>
                                                <td>0</td>
                                                <td>2 gp</td>
                                                <td>+3</td>
                                                <td>+2</td>
                                                <td>-2</td>
                                                <td>-5 ft.</td>
                                                <td>14</td>
                                                <td>2</td>
                                                <td>—</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Scale Mail</strong></td>
                                                <td>1</td>
                                                <td>4 gp</td>
                                                <td>+3</td>
                                                <td>+2</td>
                                                <td>-2</td>
                                                <td>-5 ft.</td>
                                                <td>14</td>
                                                <td>2</td>
                                                <td>—</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Chain Mail</strong></td>
                                                <td>1</td>
                                                <td>6 gp</td>
                                                <td>+4</td>
                                                <td>+1</td>
                                                <td>-2</td>
                                                <td>-5 ft.</td>
                                                <td>16</td>
                                                <td>2</td>
                                                <td>Flexible, Noisy</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Breastplate</strong></td>
                                                <td>1</td>
                                                <td>8 gp</td>
                                                <td>+4</td>
                                                <td>+1</td>
                                                <td>-2</td>
                                                <td>-5 ft.</td>
                                                <td>16</td>
                                                <td>2</td>
                                                <td>—</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- Heavy Armor -->
                        <div class="armor-category card mb-4">
                            <div class="card-header bg-danger text-white">
                                <h4><i class="fas fa-shield-virus"></i> Heavy Armor</h4>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Name</th>
                                                <th>Level</th>
                                                <th>Price</th>
                                                <th>AC</th>
                                                <th>Dex Cap</th>
                                                <th>Check Penalty</th>
                                                <th>Speed Penalty</th>
                                                <th>Strength</th>
                                                <th>Bulk</th>
                                                <th>Traits</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><strong>Splint Mail</strong></td>
                                                <td>1</td>
                                                <td>13 gp</td>
                                                <td>+5</td>
                                                <td>+1</td>
                                                <td>-3</td>
                                                <td>-10 ft.</td>
                                                <td>16</td>
                                                <td>3</td>
                                                <td>—</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Plate Mail</strong></td>
                                                <td>2</td>
                                                <td>30 gp</td>
                                                <td>+6</td>
                                                <td>+0</td>
                                                <td>-3</td>
                                                <td>-10 ft.</td>
                                                <td>18</td>
                                                <td>3</td>
                                                <td>Bulwark</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Armor Rules -->
                    <div class="armor-rules card">
                        <div class="card-header">
                            <h4><i class="fas fa-book"></i> Armor Rules Quick Reference</h4>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h5>Armor Check Penalty</h5>
                                    <p>Applies to Strength and Dexterity-based skill checks (except Stealth).</p>
                                    
                                    <h5>Dex Cap</h5>
                                    <p>Maximum Dexterity modifier that can be added to AC.</p>
                                </div>
                                <div class="col-md-6">
                                    <h5>Speed Penalty</h5>
                                    <p>Reduction to your Speed while wearing the armor.</p>
                                    
                                    <h5>Strength Requirement</h5>
                                    <p>If your Strength is below this value, you take the check penalty on attack rolls too.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Shields Tab -->
            <div class="tab-pane fade" id="shields" role="tabpanel">
                <div class="shields-section">
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-shield"></i> Shield Statistics</h4>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                            <th>Level</th>
                                            <th>Price</th>
                                            <th>AC Bonus</th>
                                            <th>Hardness</th>
                                            <th>HP</th>
                                            <th>BT</th>
                                            <th>Bulk</th>
                                            <th>Traits</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><strong>Buckler</strong></td>
                                            <td>0</td>
                                            <td>1 sp</td>
                                            <td>+1</td>
                                            <td>3</td>
                                            <td>6</td>
                                            <td>3</td>
                                            <td>L</td>
                                            <td>—</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Wooden Shield</strong></td>
                                            <td>0</td>
                                            <td>1 gp</td>
                                            <td>+2</td>
                                            <td>3</td>
                                            <td>12</td>
                                            <td>6</td>
                                            <td>1</td>
                                            <td>—</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Steel Shield</strong></td>
                                            <td>0</td>
                                            <td>2 gp</td>
                                            <td>+2</td>
                                            <td>5</td>
                                            <td>20</td>
                                            <td>10</td>
                                            <td>1</td>
                                            <td>—</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Tower Shield</strong></td>
                                            <td>1</td>
                                            <td>10 gp</td>
                                            <td>+2</td>
                                            <td>5</td>
                                            <td>24</td>
                                            <td>12</td>
                                            <td>4</td>
                                            <td>Tower</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div class="shield-rules mt-4">
                                <h5>Shield Rules</h5>
                                <ul>
                                    <li><strong>Shield Block:</strong> React to reduce damage by shield's hardness</li>
                                    <li><strong>Broken Threshold (BT):</strong> Shield becomes broken when reduced to this HP or less</li>
                                    <li><strong>Hardness:</strong> Amount of damage reduced when using Shield Block</li>
                                    <li><strong>Tower Shield:</strong> Can Take Cover behind it as an action</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Equipment Tab -->
            <div class="tab-pane fade" id="equipment" role="tabpanel">
                <div class="equipment-section">
                    <!-- Adventuring Gear -->
                    <div class="equipment-category card mb-4">
                        <div class="card-header bg-primary text-white">
                            <h4><i class="fas fa-backpack"></i> Common Adventuring Gear</h4>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Item</th>
                                            <th>Price</th>
                                            <th>Bulk</th>
                                            <th>Description</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Backpack</td>
                                            <td>1 sp</td>
                                            <td>—</td>
                                            <td>Holds up to 4 Bulk of items</td>
                                        </tr>
                                        <tr>
                                            <td>Bedroll</td>
                                            <td>2 cp</td>
                                            <td>L</td>
                                            <td>Sleeping gear; prevents fatigue from poor rest</td>
                                        </tr>
                                        <tr>
                                            <td>Rope (50 feet)</td>
                                            <td>2 sp</td>
                                            <td>L</td>
                                            <td>4 HP, DC 23 Athletics to break</td>
                                        </tr>
                                        <tr>
                                            <td>Torch</td>
                                            <td>1 cp</td>
                                            <td>L</td>
                                            <td>20-foot bright light radius, 1 hour duration</td>
                                        </tr>
                                        <tr>
                                            <td>Thieves' Tools</td>
                                            <td>3 gp</td>
                                            <td>L</td>
                                            <td>Required for Pick Locks and Disable Device</td>
                                        </tr>
                                        <tr>
                                            <td>Healer's Tools</td>
                                            <td>5 gp</td>
                                            <td>1</td>
                                            <td>Required for Medicine checks</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Alchemical Items -->
                    <div class="equipment-category card mb-4">
                        <div class="card-header bg-success text-white">
                            <h4><i class="fas fa-flask"></i> Common Alchemical Items</h4>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Item</th>
                                            <th>Level</th>
                                            <th>Price</th>
                                            <th>Bulk</th>
                                            <th>Effect</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Alchemist's Fire (Lesser)</td>
                                            <td>1</td>
                                            <td>3 gp</td>
                                            <td>L</td>
                                            <td>1d8 fire damage + 1 fire splash</td>
                                        </tr>
                                        <tr>
                                            <td>Acid Flask (Lesser)</td>
                                            <td>1</td>
                                            <td>3 gp</td>
                                            <td>L</td>
                                            <td>1d6 acid damage + 1 acid splash</td>
                                        </tr>
                                        <tr>
                                            <td>Healing Potion (Minor)</td>
                                            <td>1</td>
                                            <td>4 gp</td>
                                            <td>L</td>
                                            <td>Restore 1d8 Hit Points</td>
                                        </tr>
                                        <tr>
                                            <td>Antidote (Lesser)</td>
                                            <td>1</td>
                                            <td>3 gp</td>
                                            <td>L</td>
                                            <td>Counteract level 1 poison</td>
                                        </tr>
                                        <tr>
                                            <td>Thunderstone (Lesser)</td>
                                            <td>1</td>
                                            <td>3 gp</td>
                                            <td>L</td>
                                            <td>1d4 sonic damage + deafen</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Proficiency Tab -->
            <div class="tab-pane fade" id="proficiency" role="tabpanel">
                <div class="proficiency-section">
                    <div class="card mb-4">
                        <div class="card-header">
                            <h4><i class="fas fa-chart-line"></i> Unified Proficiency System</h4>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped table-lg">
                                    <thead>
                                        <tr>
                                            <th>Rank</th>
                                            <th>Bonus</th>
                                            <th>Description</th>
                                            <th>Applies To</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="table-secondary">
                                            <td><span class="badge bg-secondary">Untrained</span></td>
                                            <td>+0</td>
                                            <td>No particular training. Cannot attempt some actions.</td>
                                            <td>Skills, Weapons, Armor, Saves</td>
                                        </tr>
                                        <tr class="table-info">
                                            <td><span class="badge bg-info">Trained</span></td>
                                            <td>+2</td>
                                            <td>Some training through study or practice.</td>
                                            <td>All proficiency types</td>
                                        </tr>
                                        <tr class="table-primary">
                                            <td><span class="badge bg-primary">Expert</span></td>
                                            <td>+4</td>
                                            <td>Quite capable, with significant dedication.</td>
                                            <td>All proficiency types</td>
                                        </tr>
                                        <tr class="table-warning">
                                            <td><span class="badge bg-warning text-dark">Master</span></td>
                                            <td>+6</td>
                                            <td>Achieved mastery, far exceeding most others.</td>
                                            <td>All proficiency types</td>
                                        </tr>
                                        <tr class="table-success">
                                            <td><span class="badge bg-success">Legendary</span></td>
                                            <td>+8</td>
                                            <td>Renowned that stories might be told of.</td>
                                            <td>All proficiency types</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div class="proficiency-breakdown mt-4">
                                <div class="row">
                                    <div class="col-md-3">
                                        <h6>Skills</h6>
                                        <small class="text-muted">
                                            Acrobatics, Athletics, Thievery, Nature, etc.
                                            <br><strong>Formula:</strong> d20 + Level + Prof + Ability
                                        </small>
                                    </div>
                                    <div class="col-md-3">
                                        <h6>Weapons</h6>
                                        <small class="text-muted">
                                            Simple, Martial, Advanced, Unarmed
                                            <br><strong>Formula:</strong> d20 + Level + Prof + Ability
                                        </small>
                                    </div>
                                    <div class="col-md-3">
                                        <h6>Armor</h6>
                                        <small class="text-muted">
                                            Light, Medium, Heavy, Unarmored
                                            <br><strong>Formula:</strong> 10 + Level + Prof + Dex + Item
                                        </small>
                                    </div>
                                    <div class="col-md-3">
                                        <h6>Saves</h6>
                                        <small class="text-muted">
                                            Fortitude, Reflex, Will
                                            <br><strong>Formula:</strong> d20 + Level + Prof + Ability
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Proficiency Effects by Type -->
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-star"></i> Proficiency Effects by Category</h4>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <h5>Armor Proficiency</h5>
                                    <ul>
                                        <li><strong>Untrained:</strong> AC = 10 + Dex modifier (max 0)</li>
                                        <li><strong>Trained+:</strong> Add proficiency bonus to AC</li>
                                        <li><strong>Expert+:</strong> Critical hits become regular hits on attacker's natural 1</li>
                                        <li><strong>Master+:</strong> Additional armor specialization effects</li>
                                        <li><strong>Legendary:</strong> Maximum armor mastery benefits</li>
                                    </ul>

                                    <h5>Weapon Proficiency</h5>
                                    <ul>
                                        <li><strong>Untrained:</strong> -2 penalty to attack rolls</li>
                                        <li><strong>Trained+:</strong> Add proficiency bonus to attacks</li>
                                        <li><strong>Expert+:</strong> Item bonus with expert weapons</li>
                                        <li><strong>Master+:</strong> Critical hits on 19-20 instead of just 20</li>
                                        <li><strong>Legendary:</strong> Additional weapon specialization</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <h5>Skill Proficiency</h5>
                                    <ul>
                                        <li><strong>Untrained:</strong> Some actions impossible</li>
                                        <li><strong>Trained+:</strong> Can attempt all skill actions</li>
                                        <li><strong>Expert+:</strong> Skill feats become available</li>
                                        <li><strong>Master+:</strong> Additional skill feat options</li>
                                        <li><strong>Legendary:</strong> Legendary skill effects</li>
                                    </ul>

                                    <h5>Save Proficiency</h5>
                                    <ul>
                                        <li><strong>Untrained:</strong> Level + ability modifier only</li>
                                        <li><strong>Trained+:</strong> Add proficiency bonus</li>
                                        <li><strong>Expert+:</strong> Success treats critical failures as failures</li>
                                        <li><strong>Master+:</strong> Success treats failures as successes</li>
                                        <li><strong>Legendary:</strong> Critical success on natural 19-20</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .equipment-reference {
        padding: 20px;
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        min-height: 100vh;
    }

    .page-header {
        text-align: center;
        margin-bottom: 2rem;
    }

    .page-header h1 {
        color: #495057;
        margin-bottom: 1rem;
    }

    .content-tabs {
        background: white;
        border-radius: 10px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        overflow: hidden;
    }

    .nav-tabs {
        border-bottom: none;
        background: #f8f9fa;
    }

    .nav-tabs .nav-link {
        color: #495057;
        border: none;
        padding: 1rem 1.5rem;
    }

    .nav-tabs .nav-link:hover {
        background: #e9ecef;
        border: none;
    }

    .nav-tabs .nav-link.active {
        background: white;
        color: #007bff;
        border: none;
    }

    .tab-content {
        padding: 2rem;
    }

    .table th {
        background: #f8f9fa;
        color: #495057;
        border-top: none;
        font-weight: 600;
    }

    .armor-category, .equipment-category {
        margin-bottom: 2rem;
    }

    .card-header h4 {
        margin: 0;
        font-size: 1.1rem;
    }

    .table-striped tbody tr:nth-of-type(odd) {
        background-color: rgba(0,0,0,.02);
    }
</style>